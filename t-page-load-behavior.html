<script>
	(function() {

		'use strict'

	    var TravelNxt = window.TravelNxt || {};

	    TravelNxt.Behaviors = TravelNxt.Behaviors || {};
	    
	    TravelNxt.Behaviors.PageLoadBehavior = {
	        properties: {

	            preventPullToRefresh: {
	                type: Boolean,
	                value: false
	            },

	            lastTouchY: {
	                type: Number,
	                value: 0
	            },

	            stayOnPage: {
	                type: Boolean,
	                value: false
	            }
	        },

	        touchStartHandler : function (e) {
		        if (e.touches.length != 1) return;
		        this.lastTouchY = e.touches[0].clientY;
		        // Pull-to-refresh will only trigger if the scroll begins when the
		        // document's Y offset is zero.
		        this.preventDefault = window.pageYOffset == 0 ? true : false;
    		},

		    touchMoveHandler : function (e) {
		        if (this.stayOnPage) {
		            var touchY = e.touches[0].clientY;
		            var touchYDelta = touchY - this.lastTouchY;
		            this.lastTouchY = touchY;

		            if (this.preventDefault) {
		                // To suppress pull-to-refresh it is sufficient to preventDefault the
		                // first overscrolling touchmove.
		                this.preventDefault = false;
		                if (touchYDelta > 0) {
		                    e.preventDefault();
		                    return;
		                }
		            }
		        }
		    }
	    };

	})();
</script>
